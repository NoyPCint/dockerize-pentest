FROM hackersploit/bugbountytoolkit

# Environment Variables
ENV HOME /root
ENV RECON /root/recon
ENV DEBIAN_FRONTEND=noninteractive
ENV TOOLS ${HOME}/toolkit
    
# Copy cool scripts
RUN git clone https://github.com/noypearl/cool-scripts/ /tmp/cool-scripts && \
	chmod +x /tmp/cool-scripts/*.sh && \
  mv /tmp/cool-scripts/*.sh ${TOOLS}

# Add useful aliases
RUN echo "alias scan=$(printenv TOOLS)/scan.sh\nalias extract=$(printenv TOOLS)/extract_urls.sh\nalias ..=cd ..">>  ${HOME}/.bashrc

# Install Essentials
RUN apt-get update && \
    apt-get install -y --no-install-recommends 

# Install Dependencies
RUN apt-get update && \
    apt-get install -y --no-install-recommends 

# amass
RUN go get -u -v github.com/OWASP/Amass/...

# httprobe
RUN go get -u github.com/tomnomnom/httprobe

# aquatone 
RUN go get -u github.com/michenriksen/aquatone

# unfurl
RUN go get -u github.com/tomnomnom/unfurl

# gau
RUN go get -u github.com/lc/gau

# Install chromium for gowitness to work
RUN apt-get install -y chromium-browser

# nmapAutomator.sh
WORKDIR ${TOOLS}
RUN git clone https://github.com/21y4d/nmapAutomator.git && \
	chmod +x nmapAutomator/nmapAutomator.sh && \
    ln -sf nmapAutomator/nmapAutomator.sh /usr/local/bin/nmapa

# aws-s3-downloader
RUN git clone https://github.com/Ucnt/aws-s3-downloader && \
	python3 -m pip install -r aws-s3-downloader/requirements.txt

# Recon Directory
WORKDIR ${RECON}
