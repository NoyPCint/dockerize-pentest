FROM hackersploit/bugbountytoolkit


# Environment Variables
ENV HOME /root
ENV RECON /root/recon
ENV DEBIAN_FRONTEND=noninteractive
ENV TOOLS ${HOME}/toolkit
    
# Working Directory
WORKDIR ${RECON}

# Recon Directory
COPY scan.sh ${TOOLS}/

RUN echo "alias scan=$(printenv TOOLS)/scan.sh" >> ${HOME}/.bashrc

# Install Essentials
RUN apt-get update && \
    apt-get install -y --no-install-recommends 

# Install Dependencies
RUN apt-get update && \
    apt-get install -y --no-install-recommends 

# amass
RUN go get -u -v github.com/OWASP/Amass/...

# httprobe
RUN go get -u github.com/tomnomnom/httprobe

# gowitness
#RUN go get -u github.com/sensepost/gowitness 

# aquatone 
RUN go get -u github.com/michenriksen/aquatone

# Install chromium for gowitness to work
RUN apt-get install -y chromium-browser

# nmapAutomator.sh
RUN cd ${TOOLS} && \
    git clone https://github.com/21y4d/nmapAutomator.git && \
    cd nmapAutomator &&\
    chmod +x nmapAutomator.sh && \
    ln -sf ${TOOLS}/nmapAutomator/nmapAutomator.sh /usr/local/bin/nmapa
